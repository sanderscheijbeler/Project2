<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Hier komt een omschrijving">
    <meta name="author" content="Voornaam Achternaam">

    <title>Project</title>

    <link href="assets/css/style.min.css" rel="stylesheet">

  </head>
  <body>
    <div class="container">
      <header>
        <div class="menu-logo">
          <div class="bar-1"></div>
          <div class="bar-2"></div>
          <div class="bar-3"></div>
          <div class="bar-4"></div>
        </div>

        <div class="logo">
          <h1>Logo</h1>
        </div>
      </header>
      <nav class="">
        <ul class="list-group">
          <a class="nav-link" href="index.html" target="_self" ><li class="list-group-item"><i class="fa fa-home fa-fw" aria-hidden="true"></i> Home</li></a>
          <a class="nav-link" href="about.html" target="_self" ><li class="list-group-item"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i> About</li></a>
          <a class="nav-link" href="service.html" target="_self" ><li class="list-group-item"><i class="fa fa-cog fa-fw" aria-hidden="true"></i> Services</li></a>
          <a class="nav-link" href="contact.html" target="_self" ><li class="list-group-item"><i class="fa fa-envelope-o fa-fw" aria-hidden="true"></i> Contact</li></a>
        </ul>
        <div class="social-icons">
          <a href="#" target="_blank"><span class="facebook icon">
            <i class="fa fa-facebook" aria-hidden="true"></i>
          </span></a>
          <a href="#" target="_blank"><span class="twitter icon">
            <i class="fa fa-twitter" aria-hidden="true"></i>
          </span></a>
          <a href="#" target="_blank"><span class="instagram icon">
            <i class="fa fa-instagram" aria-hidden="true"></i>
          </span></a>
        </div>
      </nav>

      <main>
        <section class="small-header">
          <h1 class="about-title">Contact</h1>
        </section> <!-- about header -->


        <section class="contact-form">
          <h4>Let op, dit is alleen het front end gedeelte van een invulformulier. Ik heb dit gemaakt om te laten zien dat ik bekend ben met form-validatie. Dus bekijk gerust de code.</h4>
          <form>
            <label for="name">Voor en Achternaam: <span></span>
            <input type="name" name="name" id="name">
            </label>

            <label for="email">E-mail:
            <input type="text" name="email" id="email">
            </label>

            <label for="tel">Telefoon nr:
            <input type="tel" name="tel" id="tel">
            </label>

            <label for="msg">Bericht:
            <textarea name="msg" rows="5" cols="30" id="msg"></textarea>
            </label>
            <p id="feedbackmsg"></p>
            <button id="send">Verzend</button> <span id="sendmsg"></span>
          </form>
        </section>

      </main>

      <footer>
        <div class="footer-contact">
          <h3>Contact info</h3>
          <p>
            <strong>Adres:</strong>
            Hoogstraat 1,
            <br>
            1234 AB, Rotterdam
          </p>

          <p>
            <strong>Telefoon:</strong>
            06 123 456 78
          </p>

          <p>
            <strong>Email:</strong>
            <a href="#" target="_blank">info@mailmij.nl</a>
          </p>
        </div> <!-- footer-contact -->

        <div class="footer-menu">
          <h3>Navigatie</h3>
          <ul>
            <a href="index.html" target="_self"><li>Home</li></a>
            <a href="about.html" target="_self"><li>About</li></a>
            <a href="service.html" target="_self"><li>Services</li></a>
            <a href="contact.html" target="_self"><li>Contact</li></a>
          </ul>
        </div> <!-- footer-menu -->

        <div class="copyright col-1"> Â© 2017 Bedrijfsnaam. All Rights reserved. <br> Website made by: <a href="http://www.sanderscheijbeler.nl" target="_blank">Sander Scheijbeler</a></div>
      </footer>
    </div> <!-- container -->

  <script type="text/javascript" src="assets/js/function.js"></script>
    <script>

    //// Form validation on contact page
    const inputName = document.querySelector("#name");
    const inputMail = document.querySelector("#email");
    const inputTel = document.querySelector("#tel");
    const inputMsg = document.querySelector("#msg");
    const feedbackmsg = document.querySelector("#sendmsg");
    const submitbtn = document.querySelector("#send");
    const inputFields = document.querySelectorAll("input");
    let inputFieldArray = [];

    const regExName = /^(([A-Za-z]+[\-\']?)*([A-Za-z]+)?\s)+([A-Za-z]+[\-\']?)*([A-Za-z]+)?$/;
    const regExMail = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    const regExTel = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;

    attachInputValidation(inputName, regExName);
    attachInputValidation(inputMail, regExMail);
    attachInputValidation(inputTel, regExTel);

    submitbtn.addEventListener("click", formSubmit);

    //Putting all input fields into inputFieldArray so i can check them as valid, so when all are valid, submit can run. Or else submit will error
    inputFields.forEach(function(inputField) {
      inputFieldArray.push({
        element: inputField,
        valid: false
      });
    });

    // Getting the input, listening to change and checking it
    function attachInputValidation(elem, regex) {
      elem.addEventListener("change", () => {
        const value = elem.value;
        verifyInput(elem, value, regex);
      });
    }

    //Validation a la Sander
    function verifyInput(elem, input, regEx) {
      if (regEx.test(input)) {
        feedbackmsg.innerHTML += `${elem.id} is good! ðŸ”¥ <br>`; //Show me if the 'on change' is good! Will change this to a nice looking green color outline or something.
        //now we know that the input value is tested against the regEx, we take the ID and check it for a matching id within the inputFieldArray, that way we can make the valid true.
        for (let i = 0; i < inputFieldArray.length; i++) {
          if (inputFieldArray[i].element.id === elem.id) {
            inputFieldArray[i].valid = true;
            console.log(`I just make ${elem.id} true`)
          }
        }
      } else {
        feedbackmsg.innerHTML += `${elem.id} is wrong!!!! ðŸ’© <br>`;// Show me is the 'on change' is false. Will change this aswell.
        //If the input does not pass the test, loop through all elements, check wich input.element.id matches the elem.id (wich is passed in with the input) and change .valid too false.
        for (let k = 0; k < inputFieldArray.length; k++) {
          if (inputFieldArray[k].element.id === elem.id) {
            inputFieldArray[k].valid = false;
            console.log(`I just make ${elem.id} false`) // Talk to me what you changed
            console.log(inputFieldArray) //Show me the array
          }
        }

      }
    }

    // small function to prevent the form from resetting
    function formSubmit(e) {
      e.preventDefault();
      //check if all inputs are valid
      for (let j = 0; j < inputFieldArray.length; j++) {
        if (inputFieldArray[j].valid === true) {
          console.log(`InputField: ${inputFieldArray[j].element.id} was checked and valid`);
        } else {
          console.log(`Something went wrong during run ${inputFieldArray[j]}`);
          document.getElementById("sendmsg").innerHTML = `Please check ${inputFieldArray[j].element.id}, because something is wrong!`;
        }
      }
    }


    </script>

  </body>
</html>
